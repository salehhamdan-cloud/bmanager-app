import{r as n,u as g,j as e,M as h,e as b}from"./index-BU7E-q7q.js";import{R as x}from"./RecurrenceEditor-Bj-SDiXW.js";const v=({isOpen:o,onClose:d,onSave:c,groupSuggestions:u=[],projects:a=[]})=>{const[t,i]=n.useState({}),{addToast:l}=g();n.useEffect(()=>{o&&i({description:"",group:"",projectId:a.length===1?a[0].id:"",startDate:new Date().toISOString(),recurrenceType:"one-time",recurrence:{unit:"weeks",interval:1},duration:{unit:"days",value:7}})},[o,a]);const s=r=>{i(m=>({...m,...r}))},p=async()=>{if(!t.description?.trim()){l("תיאור המשימה הוא שדה חובה","warning");return}if(a.length>1&&!t.projectId){l("יש לבחור בניין","warning");return}const r={id:b(),description:t.description.trim(),group:t.group?.trim()||void 0,startDate:t.startDate,dueDate:t.dueDate,recurrenceType:t.recurrenceType,recurrence:t.recurrence,duration:t.duration,isCompleted:!1,createdAt:new Date().toISOString(),projectId:t.projectId};await c(r),d()};return e.jsx(h,{isOpen:o,onClose:d,title:"הוספת משימה חדשה",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("datalist",{id:"todo-groups-datalist-modal",children:u.map(r=>e.jsx("option",{value:r},r))}),a.length>1&&e.jsxs("div",{children:[e.jsx("label",{className:"label-class",children:"בניין"}),e.jsxs("select",{value:t.projectId,onChange:r=>s({projectId:r.target.value}),className:"input-class w-full",children:[e.jsx("option",{value:"",disabled:!0,children:"בחר בניין..."}),a.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"todo-desc",className:"label-class",children:"תיאור המשימה"}),e.jsx("textarea",{id:"todo-desc",value:t.description,onChange:r=>s({description:r.target.value}),rows:3,className:"input-class w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"todo-group",className:"label-class",children:"קבוצה (אופציונלי)"}),e.jsx("input",{id:"todo-group",type:"text",value:t.group,onChange:r=>s({group:r.target.value}),className:"input-class w-full",list:"todo-groups-datalist-modal"})]}),e.jsx(x,{type:"todo",details:t,onUpdate:s}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"btn-secondary",children:"ביטול"}),e.jsx("button",{type:"button",onClick:p,className:"btn-primary",children:"שמור משימה"})]}),e.jsx("style",{children:".label-class { display: block; margin-bottom: 0.25rem; font-size: 0.875rem; font-weight: 500; color: #334155; } .input-class { display: block; width: 100%; border: 1px solid #cbd5e1; border-radius: 0.375rem; padding: 0.5rem 0.75rem; } .btn-primary { padding: 0.5rem 1rem; background-color: #0284c7; color: white; border-radius: 0.375rem; font-weight: 500; } .btn-primary:hover { background-color: #0369a1; } .btn-secondary { padding: 0.5rem 1rem; background-color: #f1f5f9; color: #334155; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-weight: 500; } .btn-secondary:hover { background-color: #e2e8f0; }"})]})})};export{v as A};
