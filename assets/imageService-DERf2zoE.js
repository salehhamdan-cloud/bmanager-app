import{aQ as E,aP as I,aO as M}from"./index-D-cHbBwn.js";const A=async(s,i=E,g=I,p=M,w=!1)=>new Promise((l,t)=>{const m=new FileReader;m.onload=n=>{const a=new Image;a.onload=()=>{let e=a.width,r=a.height;e>r?e>i&&(r=Math.round(r*i/e),e=i):r>g&&(e=Math.round(e*g/r),r=g);const o=document.createElement("canvas");o.width=e,o.height=r;const d=o.getContext("2d");if(!d)return t(new Error("לא ניתן היה לקבל את הקשר הקנבס"));d.drawImage(a,0,0,e,r);const c=w?"image/jpeg":s.type==="image/png"?"image/png":"image/jpeg",u=o.toDataURL(c,p);l({dataUrl:u,name:s.name,mimeType:c})},a.onerror=e=>t(new Error("שגיאה בטעינת התמונה: "+e)),n.target?.result?a.src=n.target.result:t(new Error("לא ניתן היה לקרוא את קובץ התמונה"))},m.onerror=n=>t(new Error("שגיאה בקריאת קובץ: "+n)),m.readAsDataURL(s)});export{A as o};
