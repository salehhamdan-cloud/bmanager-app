import{au as o,av as p,ad as x,T as i,p as j,P as u,j as r,L as h,$ as b,a as I}from"./index-D-cHbBwn.js";import{a as g}from"./dateFormatter-CUKId3Gl.js";const w=({notification:e})=>{const{markAsRead:l}=o(),t={create:{text:"יצירה",color:"text-green-600",icon:u},update:{text:"עדכון",color:"text-blue-600",icon:j},delete:{text:"מחיקה",color:"text-red-600",icon:i},complete:{text:"השלמה",color:"text-purple-600",icon:x},info:{text:"מידע",color:"text-amber-600",icon:p}},{color:s,icon:a}=t[e.action]||t.info,c=e.itemType==="system",d=()=>{switch(e.itemType){case"building":return`/project/${e.itemId}`;case"report":return`/project/${e.projectId}/report/${e.itemId}`;case"problem":return`/project/${e.projectId}/checklist`;case"form":return`/project/${e.projectId}/report/${e.itemId}`;case"file":return`/project/${e.projectId}/files`;case"todo":return`/project/${e.projectId}/todos`;case"tenant":return`/project/${e.projectId}/tenants`;case"worker":return`/project/${e.projectId}/workers`;case"inventory":return`/project/${e.projectId}/inventory`;case"supplier":return"/suppliers";case"quotation":return"/quotations";case"formTemplate":return"/form-templates";case"sub-project":return`/project/${e.projectId}/sub-project/${e.itemId}`;default:return e.projectId?`/project/${e.projectId}`:"#"}},n=()=>{e.isRead||l(e.id)},m=d();return r.jsx(h,{to:m,onClick:n,className:`block p-4 rounded-lg shadow-sm border-l-4 rtl:border-r-4 rtl:border-l-0 transition-all hover:shadow-md ${e.isRead?"bg-white border-slate-200":"bg-sky-50 border-sky-400"} ${c?"border-red-400 bg-red-50 hover:bg-red-100/50":"hover:bg-slate-50"}`,children:r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-grow min-w-0",children:[r.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${c?"bg-red-100":s.replace("text-","bg-").replace("-600","-100")}`,children:c?r.jsx(b,{className:"w-5 h-5 text-red-600"}):r.jsx(a,{className:`w-5 h-5 ${s}`})}),r.jsx("div",{className:"flex-grow",children:r.jsx("p",{className:`text-sm whitespace-pre-wrap ${c?"text-red-800":"text-slate-800"}`,children:e.message})})]}),r.jsx("div",{className:"text-xs text-slate-400 flex-shrink-0 pt-1",children:g(e.createdAt)})]})})},k=()=>{const{notifications:e,isLoading:l,markAllAsRead:t,unreadCount:s}=o();return l?r.jsx(I,{text:"טוען יומן פעילות..."}):r.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"יומן פעילות"}),r.jsxs("button",{onClick:t,disabled:s===0,className:"px-4 py-2 text-sm font-medium text-white bg-sky-600 rounded-md shadow-sm hover:bg-sky-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["סמן הכל כנקרא (",s,")"]})]}),e.length===0?r.jsxs("div",{className:"text-center py-16 bg-white rounded-lg shadow-md border",children:[r.jsx("h3",{className:"text-2xl font-semibold text-slate-700",children:"יומן הפעילות ריק"}),r.jsx("p",{className:"text-slate-500 mt-2",children:"פעולות שתבצע באפליקציה יופיעו כאן."})]}):r.jsx("div",{className:"space-y-3",children:e.map(a=>r.jsx(w,{notification:a},a.id))})]})};export{k as default};
