import{h as ue,Y as fe,r as m,Z as R,u as be,j as e,a as b,_ as ge,q as L,A as z,M as A,$ as je,a0 as Ne,a1 as ye,a2 as ve,a3 as ke}from"./index-BU7E-q7q.js";import{o as we}from"./imageService-tma56vZK.js";import{a as U}from"./dateFormatter-CUKId3Gl.js";import{C as h}from"./CollapsibleSection-BbrEhqCk.js";const Fe=()=>{const{settings:T,isLoading:y,updateSettings:B,resetSettings:H}=ue(),{isGapiReady:M,cloudInitFailed:G,isSignedIn:_,driveUser:S,isProcessing:u,isAutoBackupEnabled:g,lastBackupTimestamp:D,signIn:$,signOut:W,backupToDrive:J,listBackupFiles:K,restoreFromDrive:Y,toggleAutoBackup:q}=fe(),[t,x]=m.useState(R),[v,k]=m.useState(null),{addToast:n}=be(),[Q,j]=m.useState(!1),[F,V]=m.useState([]),[Z,E]=m.useState(!1),[X,N]=m.useState(!1),[w,I]=m.useState(""),O=m.useRef(null);m.useEffect(()=>{y||x(s=>({...R,...T}))},[T,y]),m.useEffect(()=>{sessionStorage.getItem("restoreSuccess")&&(n("השחזור הושלם בהצלחה!","success"),sessionStorage.removeItem("restoreSuccess"))},[n]);const d=s=>{const{name:a,value:l,type:o}=s.target;let r=l;if((o==="number"||o==="range")&&(r=parseFloat(l)),o==="checkbox"&&(r=s.target.checked),o==="date"&&l===""&&(r=void 0),a.includes(".")){const[p,pe]=a.split(".");x(P=>{const he={...P[p],[pe]:r};return{...P,[p]:he}})}else x(p=>({...p,[a]:r}))},ee=async s=>{if(s.target.files&&s.target.files[0])try{const a=await we(s.target.files[0],200,200,.9);x(l=>({...l,companyInfo:{...l.companyInfo,logo:a.dataUrl}})),n("לוגו הועלה בהצלחה","success")}catch(a){n("שגיאה בהעלאת הלוגו","error"),console.error("Logo upload error:",a)}},se=s=>{if(s.target.files&&s.target.files[0]){const a=s.target.files[0];if(a.type!=="font/ttf"&&!a.name.toLowerCase().endsWith(".ttf")){n("אנא העלה קובץ TTF בלבד.","error");return}const l=a.name.replace(/\.[^/.]+$/,"")||"CustomFont";x(o=>({...o,customFontName:l})),k(a),n(`גופן '${l}' נבחר להעלאה. לחץ על 'שמור הגדרות' כדי להשלים.`,"info")}},te=()=>{x(s=>({...s,customFontUrl:void 0,customFontStoragePath:void 0,customFontName:void 0})),k(null),n("גופן מותאם אישית יוסר בשמירה.","info")},ae=s=>{const a=s.target.value,l=Ne[a];l&&l.pdfTheme&&x(o=>({...o,pdfTemplate:a,pdfTheme:{...o.pdfTheme,...l.pdfTheme}}))},le=async()=>{try{await B(t,v||void 0),k(null),n("ההגדרות נשמרו בהצלחה","success")}catch{n("שגיאה בשמירת ההגדרות","error")}},oe=async()=>{j(!0),E(!0);try{const s=await K();V(s)}catch(s){console.error("Error fetching backup files",s),j(!1)}finally{E(!1)}},ne=async s=>{window.confirm(`האם אתה בטוח שברצונך לשחזר את הגיבוי "${s.name}"?
כל המידע הנוכחי יימחק ויוחלף במידע מהגיבוי. לא ניתן לבטל פעולה זו.`)&&(j(!1),await Y(s.id))},re=async()=>{n("מייצא גיבוי מלא...","info");try{const s=await ye(),a=JSON.stringify(s,null,2),l=new Blob([a],{type:"application/json"}),o=URL.createObjectURL(l),r=document.createElement("a");r.href=o;const p=new Date().toISOString().split("T")[0];r.download=`Full_App_Backup_${p}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),n("הגיבוי המלא יוצא בהצלחה!","success")}catch(s){console.error("Error exporting full backup:",s),n("שגיאה בייצוא הגיבוי המלא","error")}},ie=()=>{O.current?.click()},ce=async s=>{const a=s.target.files?.[0];if(a){if(!window.confirm("האם אתה בטוח שברצונך לשחזר מגיבוי? כל הנתונים הנוכחיים יימחקו ויוחלפו. לא ניתן לבטל פעולה זו.")){s.target&&(s.target.value="");return}n("מייבא גיבוי...","info");try{const l=await a.text(),o=JSON.parse(l);if(!o.projects||!o.settings||!o.backupDate)throw new Error("Invalid full backup file structure.");await ve(o),sessionStorage.setItem("restoreSuccess","true"),window.location.reload()}catch(l){console.error("Error importing backup:",l),n("שגיאה בייבוא הגיבוי. הקובץ עשוי להיות פגום.","error")}finally{s.target&&(s.target.value="")}}},de=async()=>{if(window.confirm("האם אתה בטוח שברצונך לאפס את כל ההגדרות לברירת המחדל? לא ניתן לבטל פעולה זו."))try{await H(),n("ההגדרות אופסו לברירת המחדל.","success")}catch{n("שגיאה באיפוס ההגדרות.","error")}},me=async()=>{if(w!=="DELETE"){n("טקסט האישור אינו תואם.","error");return}try{await ke(),n("כל נתוני האפליקציה נמחקו.","success"),N(!1),I(""),setTimeout(()=>{window.location.reload()},2e3)}catch{n("שגיאה במחיקת הנתונים.","error")}};if(y)return e.jsx(b,{text:"טוען הגדרות..."});const c=(s,a,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:a.toString(),className:"text-sm font-medium text-slate-700",children:s}),e.jsx("input",{type:"color",id:a.toString(),name:a.toString(),value:l,onChange:d,className:"w-24 h-8 p-0 border-none rounded"})]}),f=(s,a,l,o=0,r=100,p=1)=>e.jsxs("div",{children:[e.jsxs("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700",children:[s," (",l||o,")"]}),e.jsx("input",{type:"range",id:a,name:a,value:l||o,min:o,max:r,step:p,onChange:d,className:"mt-1 block w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-sky-600"})]}),C=(s,a,l,o)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:a,className:"block text-sm font-medium text-slate-700",children:s}),e.jsx("select",{id:a,name:a,value:l,onChange:d,className:"mt-1 block w-full input-class",children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),xe=()=>M?G?e.jsxs("div",{className:"text-sm text-amber-700 bg-amber-50 p-3 rounded-md border-r-4 border-amber-400 rtl:border-l-4 rtl:border-r-0",children:[e.jsx("p",{className:"font-semibold",children:"גיבוי ענן אינו פעיל"}),e.jsx("p",{children:"גיבוי לענן אינו מוגדר. יש להגדיר את מפתחות ה-API הנדרשים כמשתני סביבה."})]}):_?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["מחובר כ: ",e.jsxs("span",{className:"font-semibold",children:[S?.name," (",S?.email,")"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:J,disabled:u,className:"btn-primary flex items-center gap-2",children:[u?e.jsx(b,{size:"sm"}):e.jsx(L,{className:"w-5 h-5"})," גיבוי לענן"]}),e.jsxs("button",{onClick:oe,disabled:u,className:"btn-secondary flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"})," שחזור מהענן"]}),e.jsx("button",{onClick:W,className:"text-sm text-red-600 hover:underline self-center",children:"התנתק"})]}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsx("h4",{className:"text-md font-medium text-slate-800",children:"גיבוי אוטומטי תקופתי"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:g,onChange:q}),e.jsx("div",{className:`block w-12 h-6 rounded-full transition ${g?"bg-sky-500":"bg-slate-300"}`}),e.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition ${g?"translate-x-6":""}`})]}),e.jsx("span",{className:"text-sm text-slate-600",children:g?"מופעל (כל שעה)":"כבוי"})]}),D&&e.jsxs("p",{className:"text-xs text-slate-500",children:["גיבוי אחרון (ידני או אוטומטי): ",U(D)]})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"גבה את כל נתוני האפליקציה שלך בצורה מאובטחת לחשבון Google Drive שלך."}),e.jsx("button",{onClick:$,disabled:u,className:"btn-primary",children:u?e.jsx(b,{size:"sm"}):"התחבר עם Google Drive"})]}):e.jsx(b,{text:"טוען שירותי ענן..."}),i=({name:s,label:a})=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:s,checked:!!t[s],onChange:d,className:"h-4 w-4 rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"ml-2 rtl:mr-2 text-sm text-slate-700",children:a})]});return e.jsxs("div",{className:"max-w-3xl mx-auto bg-white p-6 sm:p-8 rounded-lg shadow-xl animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-semibold text-sky-700 mb-6 border-b pb-3",children:"הגדרות אפליקציה ו-PDF"}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium",children:"מידע על החברה"}),defaultOpen:!0,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-slate-700",children:"שם החברה"}),e.jsx("input",{type:"text",id:"companyName",name:"companyInfo.name",value:t.companyInfo.name,onChange:d,className:"mt-1 block w-full input-class"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"logo",className:"block text-sm font-medium text-slate-700",children:"לוגו החברה"}),e.jsx("input",{type:"file",id:"logo",accept:"image/png, image/jpeg",onChange:ee,className:"mt-1 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100"}),t.companyInfo.logo&&e.jsx("img",{src:t.companyInfo.logo,alt:"Company Logo Preview",className:"mt-2 h-16 w-auto border p-1 rounded-md"})]})]})}),e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium",children:"הגדרות PDF כלליות"}),defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"authorName",className:"block text-sm font-medium text-slate-700",children:"שם מחבר ברירת מחדל"}),e.jsx("input",{type:"text",id:"authorName",name:"authorName",value:t.authorName,onChange:d,className:"mt-1 block w-full input-class"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"authorPhone",className:"block text-sm font-medium text-slate-700",children:"טלפון מחבר ברירת מחדל"}),e.jsx("input",{type:"tel",id:"authorPhone",name:"authorPhone",value:t.authorPhone||"",onChange:d,className:"mt-1 block w-full input-class"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"authorEmail",className:"block text-sm font-medium text-slate-700",children:"אימייל מחבר ברירת מחדל"}),e.jsx("input",{type:"email",id:"authorEmail",name:"authorEmail",value:t.authorEmail||"",onChange:d,className:"mt-1 block w-full input-class"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customFont",className:"block text-sm font-medium text-slate-700",children:"העלה גופן עברי (TTF)"}),e.jsx("input",{type:"file",id:"customFont",accept:".ttf,font/ttf",onChange:se,className:"mt-1 block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-sky-50 file:text-sky-700 hover:file:bg-sky-100"}),(t.customFontName||v)&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("p",{className:"text-xs text-slate-500",children:["גופן נוכחי: ",t.customFontName||v?.name]}),e.jsx("button",{onClick:te,className:"text-xs text-red-500 hover:underline",children:"(הסר)"})]})]})]})}),e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium",children:"עיצוב אפליקציה"}),defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4",children:[c("צבע כותרת עליונה","appTheme.headerColor",t.appTheme.headerColor),c("צבע טקסט כותרת","appTheme.headerTextColor",t.appTheme.headerTextColor),c("צבע הדגשה","appTheme.accentColor",t.appTheme.accentColor),c("רקע כותרת קבוצה","appTheme.groupHeaderBackgroundColor",t.appTheme.groupHeaderBackgroundColor),c("צבע טקסט כותרת קבוצה","appTheme.groupHeaderTextColor",t.appTheme.groupHeaderTextColor)]})}),e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium",children:"עיצוב PDF"}),defaultOpen:!1,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"תבניות עיצוב"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pdfTemplate",className:"block text-sm font-medium text-slate-700",children:"תבנית עיצוב כללית"}),e.jsx("select",{id:"pdfTemplate",name:"pdfTemplate",value:t.pdfTemplate,onChange:ae,className:"mt-1 block w-full input-class",children:ge.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsx("h4",{className:"font-semibold mt-4",children:"צבעים מותאמים אישית (PDF)"}),c("צבע כותרת","pdfTheme.headerColor",t.pdfTheme.headerColor),c("צבע טקסט כותרת","pdfTheme.headerTextColor",t.pdfTheme.headerTextColor),c("צבע טקסט כללי","pdfTheme.textColor",t.pdfTheme.textColor),c("צבע הדגשה","pdfTheme.accentColor",t.pdfTheme.accentColor),c("רקע כותרת קבוצה (טופס)","pdfTheme.formGroupHeaderColor",t.pdfTheme.formGroupHeaderColor),c("רקע כותרת טופס","pdfTheme.formTitleHeaderColor",t.pdfTheme.formTitleHeaderColor),c("טקסט כותרת טופס","pdfTheme.formTitleTextColor",t.pdfTheme.formTitleTextColor),c("רקע כותרת תמונה (טופס)","pdfTheme.formPhotoHeaderColor",t.pdfTheme.formPhotoHeaderColor)]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"גדלים ומיקומים (PDF)"}),f("גודל לוגו (%)","logoSize",t.logoSize,5,50),C("מיקום לוגו","logoPosition",t.logoPosition,[{value:"top-left",label:"שמאל"},{value:"top-right",label:"ימין"},{value:"top-center",label:"מרכז"}]),f("גודל תמונת בניין (%)","projectImageSize",t.projectImageSize,10,80),C("מיקום תמונת בניין","projectImagePosition",t.projectImagePosition,[{value:"below-header",label:"מתחת לכותרת"},{value:"top-left",label:"שמאל עליון"},{value:"top-right",label:"ימין עליון"}]),f("גודל תמונת תקלה (%)","problemImageSize",t.problemImageSize,10,80),e.jsx("h4",{className:"font-semibold mt-4",children:"גודל גופן (נקודות, PDF)"}),f("גודל גופן קטן","fontSizeSmall",t.fontSizeSmall,8,14),f("גודל גופן בינוני","fontSizeMedium",t.fontSizeMedium,10,18),f("גודל גופן גדול","fontSizeLarge",t.fontSizeLarge,12,24)]})]})}),e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium",children:"הגדרות הפקת PDF"}),defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4",children:[C("כיוון הדף","pdfOrientation",t.pdfOrientation,[{value:"portrait",label:"לאורך (Portrait)"},{value:"landscape",label:"לרוחב (Landscape)"}]),e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsx(i,{name:"pdfIncludeDashboard",label:"כלול Dashboard בדוח הראשי"}),e.jsx(i,{name:"pdfIncludeProblemPhotos",label:"כלול תמונות של תקלות בדוח הראשי"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"block text-sm font-medium text-slate-700 mb-2",children:"סינון תאריכים עבור PDF של רשימת תקלות"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pdfDateRangeStart",className:"block text-sm font-medium text-slate-700",children:"מתאריך"}),e.jsx("input",{type:"date",id:"pdfDateRangeStart",name:"pdfDateRangeStart",value:t.pdfDateRangeStart?.split("T")[0]||"",onChange:d,className:"mt-1 block w-full input-class"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pdfDateRangeEnd",className:"block text-sm font-medium text-slate-700",children:"עד תאריך"}),e.jsx("input",{type:"date",id:"pdfDateRangeEnd",name:"pdfDateRangeEnd",value:t.pdfDateRangeEnd?.split("T")[0]||"",onChange:d,className:"mt-1 block w-full input-class"})]})]}),e.jsx("button",{type:"button",onClick:()=>x(s=>({...s,pdfDateRangeStart:void 0,pdfDateRangeEnd:void 0})),className:"text-sm text-sky-600 hover:underline mt-2",children:"נקה טווח תאריכים"})]})]})}),e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium",children:"התראות במייל"}),defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{name:"enableEmailNotifications",label:"אפשר שליחת התראות במייל"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notificationEmailAddress",className:"block text-sm font-medium text-slate-700",children:"כתובת מייל לקבלת התראות"}),e.jsx("input",{type:"email",id:"notificationEmailAddress",name:"notificationEmailAddress",value:t.notificationEmailAddress,onChange:d,className:"input-class w-full"})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"התראות על אירועים"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsx(i,{name:"notifyOnCriticalIssues",label:"על תקלה קריטית"}),e.jsx(i,{name:"notifyOnTaskCompletion",label:"על השלמת משימה"}),e.jsx(i,{name:"notifyOnNewReport",label:"על דוח חדש"}),e.jsx(i,{name:"notifyOnQuotationStatusChange",label:'על שינוי סטטוס הצע"מ'})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"התראות על תפוגה קרובה (Digest)"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-x-4 gap-y-2",children:[e.jsx(i,{name:"notifyOnFileDueSoon",label:"תוקף קבצים"}),e.jsx(i,{name:"notifyOnTodoDueSoon",label:"יעד משימות"}),e.jsx(i,{name:"notifyOnPermitDueSoon",label:"תוקף היתרים"}),e.jsx(i,{name:"notifyOnWarrantyDueSoon",label:"תוקף אחריות"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-semibold text-slate-700 mb-2",children:"התראות על פג תוקף (Digest)"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-x-4 gap-y-2",children:[e.jsx(i,{name:"notifyOnFileExpired",label:"תוקף קבצים"}),e.jsx(i,{name:"notifyOnTodoExpired",label:"יעד משימות"}),e.jsx(i,{name:"notifyOnPermitExpired",label:"תוקף היתרים"}),e.jsx(i,{name:"notifyOnWarrantyExpired",label:"תוקף אחריות"})]})]})]})}),e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium",children:"גיבוי ושחזור"}),defaultOpen:!1,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h4",{className:"text-md font-semibold text-slate-700 mb-2",children:"גיבוי ושחזור בענן (Google Drive)"}),e.jsx("div",{className:"p-4 border rounded-md shadow-sm",children:xe()})]}),e.jsxs("section",{children:[e.jsx("h4",{className:"text-md font-semibold text-slate-700 mb-2",children:"גיבוי ושחזור מקומי"}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-md shadow-sm",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"שמור את כל נתוני האפליקציה לקובץ במכשיר שלך, או שחזר ממנו."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:re,disabled:u,className:"btn-secondary flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"})," ייצא גיבוי מלא"]}),e.jsxs("button",{onClick:ie,disabled:u,className:"btn-secondary flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5"})," ייבא מגיבוי"]}),e.jsx("input",{type:"file",ref:O,onChange:ce,className:"hidden",accept:".json,application/json"})]})]})]})]})}),e.jsx(h,{title:e.jsx("h3",{className:"text-lg font-medium text-red-800",children:"אזור סכנה"}),defaultOpen:!1,children:e.jsxs("div",{className:"space-y-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-700",children:"איפוס הגדרות"}),e.jsx("p",{className:"text-sm text-red-600",children:"שחזר את כל הגדרות האפליקציה וה-PDF לברירת המחדל."})]}),e.jsx("button",{onClick:de,className:"btn-danger",children:"אפס הגדרות"})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-red-200 flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-700",children:"מחק את כל הנתונים"}),e.jsx("p",{className:"text-sm text-red-600",children:"מחק לצמיתות את כל הפרויקטים, הדוחות, הקבצים וכו'. לא ניתן לבטל פעולה זו."})]}),e.jsx("button",{onClick:()=>N(!0),className:"btn-danger",children:"מחק הכל"})]})]})})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{onClick:le,className:"px-6 py-2 text-white bg-sky-600 hover:bg-sky-700 rounded-md shadow-md font-medium",children:"שמור הגדרות"})}),e.jsxs(A,{isOpen:Q,onClose:()=>j(!1),title:"שחזור גיבוי מ-Google Drive",size:"lg",children:[" ",Z?e.jsx(b,{text:"טוען רשימת גיבויים..."}):e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto p-1",children:F.length>0?F.map(s=>e.jsxs("div",{className:"flex flex-wrap justify-between items-center p-3 bg-slate-50 rounded-md gap-3",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-medium text-slate-800 break-all",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["תאריך: ",U(s.modifiedTime)]})]}),e.jsx("button",{onClick:()=>ne(s),className:"btn-secondary text-sm flex-shrink-0",children:"שחזר"})]},s.id)):e.jsx("p",{className:"text-slate-500 text-center py-4",children:"לא נמצאו קבצי גיבוי בחשבון Google Drive שלך."})})]}),e.jsx(A,{isOpen:X,onClose:()=>N(!1),title:"אישור מחיקת נתונים",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 bg-red-50 p-3 rounded-md",children:[e.jsx(je,{className:"w-6 h-6 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-800",children:"זוהי פעולה הרסנית."}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"אתה עומד למחוק לצמיתות את כל הנתונים באפליקציה זו. כולל כל הפרויקטים, הדוחות, הבעיות, הקבצים, ההגדרות והמלאי. לא ניתן לבטל פעולה זו."})]})]}),e.jsxs("p",{className:"text-slate-600",children:["כדי לאשר, אנא הקלד ",e.jsx("strong",{children:"DELETE"})," בתיבה למטה."]}),e.jsx("input",{type:"text",value:w,onChange:s=>I(s.target.value),className:"input-class w-full text-center tracking-widest font-mono"}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx("button",{onClick:()=>N(!1),className:"btn-secondary",children:"ביטול"}),e.jsx("button",{onClick:me,disabled:w!=="DELETE",className:"btn-danger disabled:bg-red-300 disabled:cursor-not-allowed",children:"אני מבין, מחק את כל הנתונים"})]})]})}),e.jsx("style",{children:".input-class { display: block; width: 100%; border: 1px solid #cbd5e1; border-radius: 0.375rem; padding: 0.5rem 0.75rem; transition: border-color 0.2s; } .input-class:focus { border-color: #0284c7; outline: none; box-shadow: 0 0 0 1px #0284c7; } .btn-primary { padding: 0.5rem 1rem; background-color: #0284c7; color: white; border-radius: 0.375rem; font-weight: 500; transition: background-color 0.2s; } .btn-primary:hover:not(:disabled) { background-color: #0369a1; } .btn-primary:disabled { background-color: #0284c7; opacity: 0.6; cursor: not-allowed; } .btn-secondary { padding: 0.5rem 1rem; background-color: #f1f5f9; color: #334155; border: 1px solid #cbd5e1; border-radius: 0.375rem; font-weight: 500; } .btn-secondary:hover:not(:disabled) { background-color: #e2e8f0; } .btn-danger { padding: 0.5rem 1rem; background-color: #dc2626; color: white; border-radius: 0.375rem; font-weight: 500; } .btn-danger:hover:not(:disabled) { background-color: #b91c1c; } @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } .animate-fadeIn { animation: fadeIn 0.3s ease-out; }"})]})};export{Fe as default};
